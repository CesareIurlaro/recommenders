<?xml version="1.0" encoding="UTF-8"?>
<project
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<groupId>org.eclipse.recommenders</groupId>
	<artifactId>org.eclipse.recommenders.parent</artifactId>
	<version>0.1.0-SNAPSHOT</version>
	<packaging>pom</packaging>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<build-alias>alpha-1</build-alias>
		<tycho-version>0.10.0</tycho-version>
		<osgi-test-version>0.10.0</osgi-test-version>
		<emma.session.out.file>${project.build.directory}/emma/${project.artifactId}.es</emma.session.out.file>
		<emma.filter>*</emma.filter>
		<!-- org.eclipse.recommenders.commons.stacktraces,org.eclipse.recommenders.commons.stacktraces.client,org.eclipse.recommenders.rcp.stacktraces.openid -->
		<eclemma.instrument.bundles>
			org.eclipse.recommenders.commons.utils,org.eclipse.recommenders.commons.utils.gson
		</eclemma.instrument.bundles>
	</properties>
	<repositories>
		<repository>
			<id>helios</id>
			<layout>p2</layout>
			<url>http://download.eclipse.org/releases/helios</url>
		</repository>
		<repository>
			<id>recommenders-3rd</id>
			<layout>p2</layout>
			<url>http://vandyk.st.informatik.tu-darmstadt.de/updates/3rd-20110218_1045/</url>
		</repository>
		<repository>
			<id>swtbot</id>
			<layout>p2</layout>
			<url>http://download.eclipse.org/technology/swtbot/helios/dev-build/update-site/</url>
		</repository>
	</repositories>


	<profiles>
		<profile>
			<id>coverage</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>tycho-maven-plugin</artifactId>
						<version>${tycho-version}</version>
						<extensions>true</extensions>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-compiler-plugin</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<source>1.6</source>
							<target>1.6</target>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>target-platform-configuration</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<resolver>p2</resolver>
							<ignoreTychoRepositories>false</ignoreTychoRepositories>
							<environments>
								<environment>
									<os>linux</os>
									<ws>gtk</ws>
									<arch>x86</arch>
								</environment>
								<environment>
									<os>linux</os>
									<ws>gtk</ws>
									<arch>x86_64</arch>
								</environment>
								<environment>
									<os>win32</os>
									<ws>win32</ws>
									<arch>x86</arch>
								</environment>
								<environment>
									<os>win32</os>
									<ws>win32</ws>
									<arch>x86_64</arch>
								</environment>
								<environment>
									<os>macosx</os>
									<ws>cocoa</ws>
									<arch>x86_64</arch>
								</environment>
							</environments>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>build-helper-maven-plugin</artifactId>
						<version>1.5</version>
						<executions>
							<execution>
								<id>attach-artifacts</id>
								<phase>package</phase>
								<goals>
									<goal>attach-artifact</goal>
								</goals>
								<configuration>
									<artifacts>
										<artifact>
											<file>${emma.session.out.file}</file>
											<type>es</type>
										</artifact>
									</artifacts>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-test-plugin</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<systemProperties combine.children="append">
								<eclemma.help>true</eclemma.help>
								<emma.session.out.file>${emma.session.out.file}</emma.session.out.file>
								<emma.filter>${emma.filter}</emma.filter>
								<eclemma.instrument.bundles>${eclemma.instrument.bundles}</eclemma.instrument.bundles>
							</systemProperties>
							<frameworkExtensions>
								<frameworkExtension>
									<groupId>org.eclemma.runtime.equinox</groupId>
									<artifactId>org.eclemma.runtime.equinox</artifactId>
									<version>1.1.0.200908261008</version>
								</frameworkExtension>
							</frameworkExtensions>
						</configuration>
					</plugin>
					<plugin>
						<groupId>com.mycila.maven-license-plugin</groupId>
						<artifactId>maven-license-plugin</artifactId>
						<version>1.9.0</version>
						<executions>
							<execution>
								<goals>
									<goal>check</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<encoding>UTF-8</encoding>
							<validHeaders>
								<validHeader>org.eclipse.recommenders.releng/etc/license-fritz-kaluza-2010.txt</validHeader>
								<validHeader>org.eclipse.recommenders.releng/etc/license-fritz-kaluza-2010.txt</validHeader>
								<validHeader>org.eclipse.recommenders.releng/etc/license-tu-darmstadt-2010.txt</validHeader>
								<validHeader>org.eclipse.recommenders.releng/etc/license-tu-darmstadt-2011.txt</validHeader>
								<validHeader>org.eclipse.recommenders.releng/etc/license-henss-2010.txt</validHeader>
								<validHeader>org.eclipse.recommenders.releng/etc/license-henss-2011.txt</validHeader>
							</validHeaders>
							<strictCheck>false</strictCheck>
							<quiet>false</quiet>
							<failIfMissing>true</failIfMissing>
							<includes>
								<include>**/*.java</include>
							</includes>
							<encoding>UTF-8</encoding>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-source-plugin</artifactId>
						<version>${tycho-version}</version>
						<executions>
							<execution>
								<id>attach-source</id>
								<phase>process-classes</phase>
								<goals>
									<goal>plugin-source</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<!-- http://software.2206966.n2.nabble.com/Tycho-qualifier-td5659840.html -->
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-packaging-plugin</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<format>'v'yyyyMMdd-HHmm'-${build-alias}'</format>
							<archiveSite>true</archiveSite>
						</configuration>
					</plugin>
				</plugins>
			</build>

		</profile>
		<profile>
			<id>developer</id>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>tycho-maven-plugin</artifactId>
						<version>${tycho-version}</version>
						<extensions>true</extensions>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-compiler-plugin</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<source>1.6</source>
							<target>1.6</target>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>target-platform-configuration</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<resolver>p2</resolver>

							<ignoreTychoRepositories>false</ignoreTychoRepositories>
							<environments>
								<environment>
									<os>linux</os>
									<ws>gtk</ws>
									<arch>x86</arch>
								</environment>
								<environment>
									<os>linux</os>
									<ws>gtk</ws>
									<arch>x86_64</arch>
								</environment>
								<environment>
									<os>win32</os>
									<ws>win32</ws>
									<arch>x86</arch>
								</environment>
								<environment>
									<os>win32</os>
									<ws>win32</ws>
									<arch>x86_64</arch>
								</environment>
								<environment>
									<os>macosx</os>
									<ws>cocoa</ws>
									<arch>x86_64</arch>
								</environment>
							</environments>
						</configuration>
					</plugin>

					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-test-plugin</artifactId>
						<version>${tycho-version}</version>
					</plugin>
					<plugin>
						<groupId>org.sonatype.tycho</groupId>
						<artifactId>maven-osgi-source-plugin</artifactId>
						<version>${tycho-version}</version>
						<executions>
							<execution>
								<id>attach-source</id>
								<phase>process-classes</phase>
								<goals>
									<goal>plugin-source</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-javadoc-plugin</artifactId>
						<version>2.7</version>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>


	<modules>

		<!-- plug-ins -->

		<module>org.eclipse.recommenders.commons.analysis</module>
		<module>org.eclipse.recommenders.tests.commons.analysis</module>

		<module>org.eclipse.recommenders.commons.injection</module>
		<module>org.eclipse.recommenders.commons.utils</module>
		<module>org.eclipse.recommenders.commons.utils.gson</module>
		<module>org.eclipse.recommenders.rcp</module>

		<module>org.eclipse.recommenders.rcp.analysis</module>
		<module>org.eclipse.recommenders.tests.rcp.analysis</module>

		<module>org.eclipse.recommenders.rcp.codecompletion</module>
		<module>org.eclipse.recommenders.tests.rcp.codecompletion</module>

		<module>org.eclipse.recommenders.rcp.codecompletion.calls</module>
		<module>org.eclipse.recommenders.tests.rcp.codecompletion.calls</module>

		<module>org.eclipse.recommenders.rcp.codecompletion.overrides</module>
		<module>org.eclipse.recommenders.tests.rcp.codecompletion.overrides</module>

		<module>org.eclipse.recommenders.rcp.codecompletion.chain</module>

		<module>org.eclipse.recommenders.rcp.utils</module>
		<module>org.eclipse.recommenders.tests.commons</module>
		<module>org.eclipse.recommenders.tests.commons.unit</module>
		<module>org.eclipse.recommenders.examples.rcp.codecompletion</module>

		<module>org.eclipse.recommenders.doc.user</module>

		<!-- features 'n update sites -->

		<module>org.eclipse.recommenders.rcp.codecompletion.feature</module>
		<module>org.eclipse.recommenders.rcp.codecompletion.source-feature</module>
		<module>org.eclipse.recommenders.rcp.update-site</module>
	</modules>

</project>
